"use strict";var TodoView=Backbone.View.extend({tagName:"#todo",events:{"keypress .searchIpt":"createOnEnter","click .searchBtn":"search"},initialize:function(){this.$el=$("#todo"),this.fooList=$("#fooList"),this.input=this.$(".searchIpt"),this.searchBtnStatus=!1,this.listenTo(foodLists,"add",this.render),this.listenTo(foodLists,"change",this.render)},render:function(){var t=_.template($("#food-template").html(),{foodLists:foodLists.models});return this.fooList.html(t),this},edit:function(){},close:function(){},search:function(){this.searchBtnStatus=!0,this.createOnEnter()},createOnEnter:function(t){var e=this,i=e.input.val(),s="https://api.nutritionix.com/v1_1/search/"+i+"?fields=item_name%2Citem_id%2Cbrand_name%2Cnf_calories%2Cnf_total_fat&appId=fafaa50d&appKey=dd6e5d7563cfb23e902d053eca5c80a4";!0!==e.searchBtnStatus&&t.which!==ENTER_KEY||(foodLists.reset(),!0===e.searchBtnStatus&&(e.searchBtnStatus=!1),$.ajax({url:s}).done(function(t){if(-1!==Object.prototype.toString.call(t).indexOf("Object")){if(t.hits){for(var e=[],i=0;i<t.hits.length;i++){var s=new TodoView({title:t.hits[i].fields.item_name,brandName:t.hits[i].fields.brand_name,calories:t.hits[i].fields.nf_calories});"USDA"===s.get("brandName")&&s.set("brandName",""),e.push(s)}foodLists.push(e)}}else alert("响应的结果数据类型不是一个对象")}).fail(function(t){alert("响应失败")}))}});
//# sourceMappingURL=app-view.js.map
