"use strict";var AppView=Backbone.View.extend({el:"#todo",events:{"keypress .searchIpt":"createOnEnter","click .searchBtn":"search"},initialize:function(){this.foodListEle=$("#foodList"),this.input=this.$(".searchIpt"),this.searchBtnStatus=!1},render:function(){return foodsCol.length>0&&(foodsCol.each(function(e){var t=new TodoView({model:e});this.foodListEle.append(t.render().el)},this),this.foodListEle.show()),this},search:function(){this.searchBtnStatus=!0,this.createOnEnter()},createOnEnter:function(e){var t=this,i=t.input.val(),s="https://api.nutritionix.com/v1_1/search/"+i+"?fields=item_name%2Citem_id%2Cbrand_name%2Cnf_calories%2Cnf_total_fat&appId=fafaa50d&appKey=dd6e5d7563cfb23e902d053eca5c80a4";!0!==t.searchBtnStatus&&e.which!==ENTER_KEY||(!0===t.searchBtnStatus&&(t.searchBtnStatus=!1),this.foodListEle.html(""),spinner.spin(loadTarget),$.ajax({url:s}).done(function(e){if(foodsCol.reset(),spinner.spin(),-1!==Object.prototype.toString.call(e).indexOf("Object")){if(e.hits){for(var i=[],s=0;s<e.hits.length;s++){var n=new Food({title:e.hits[s].fields.item_name,brandName:e.hits[s].fields.brand_name,calories:e.hits[s].fields.nf_calories});"USDA"===n.get("brandName")&&n.set("brandName",""),i.push(n)}foodsCol.push(i),t.render()}}else alert("响应的结果数据类型不是一个对象")}).fail(function(e){alert("响应失败")}))}});
//# sourceMappingURL=app-view.js.map
