{"version":3,"sources":["views/food-view.js"],"names":["FoodView","Backbone","View","extend","tagName","click","initialize","this","food","$","model","render","remove","$el","html","get","newAttributes","prop","self","calories","checked","title","brandName","toggleService","toggle","hide","selectedFoods","create"],"mappings":"YAAA,IAAIA,UAAWC,SAASC,KAAKC,QAA7BC,QAAIJ,KAEFI,QAGEC,MAAS,iBAIXC,WAAY,WADZC,KAAAC,KAAAC,EAAA,aACAH,KAAAA,SAAYC,KAAAG,MAAA,SAAWH,KAAAI,QACrBJ,KAAKC,SAASD,KAAAG,MAAd,UAAAH,KAAAK,SAMFD,OAAQ,WAeN,MAhBFJ,MAAAM,IAAAC,KACAH,wDASEJ,KAAAG,MAAqBK,IAArB,aAA2CA,gBAC3CR,KAAAG,MAAAK,IAAA,SAAA,2CA1BgCR,KAAAG,MAAAK,IAAA,YAAA,iBA8BlCC,KAAAA,EAAAA,SAAeC,KAAA,UAAAV,KAAAG,MAAYK,IAAA,YACrBG,MAIFC,cAAUD,WACVE,GAAAA,GAASF,IAJJ,QAhCyBG,MAAAH,EAAAR,MAAAK,IAAA,SAuClCO,UAAAJ,EAAAR,MAAAK,IAAA,aACAQ,SAAAA,EAAeb,MAAAK,IAAA,YACbK,QAAWI,EAAAA,MAAXT,IAAA,aAIDQ,cAAA,WA7CHhB,KAAAG,MAAAc,SA0CIjB,KAAKC,KAAKiB,KAAK,KAEfC,cAAcC,OAAOpB,KAAKS","file":"food-view.js","sourcesContent":["var FoodView = Backbone.View.extend({\r\n\r\n  tagName: 'li',\r\n\r\n  events: {\r\n    'click': 'toggleService'\r\n  },\r\n\r\n  // Called when the view is first created\r\n  initialize: function() {\r\n    this.food = $('#foodList');\r\n    this.listenTo(this.model, 'change', this.render);\r\n    this.listenTo(this.model, 'destroy', this.remove);\r\n  },\r\n\r\n  // Re-render the titles of the todo item.\r\n  render: function() {\r\n    this.$el.html(\r\n      '<div>'\r\n      + '<input type=\"radio\" value=\"\" name=\"food\"/>'\r\n      + '<span>' + this.model.get('brandName') + '</span>'\r\n      + '<span>' + this.model.get('title') + '</span>'\r\n      + '<span class=\"calories\">calories: ' + this.model.get('calories') + '</span>'\r\n      + '</div>'\r\n    );\r\n    this.$('input').prop('checked', this.model.get('checked'));\r\n    return this;\r\n  },\r\n\r\n  // 新建属性\r\n  newAttributes: function () {\r\n    var self = this;\r\n    return {\r\n      title: self.model.get('title'),\r\n      brandName: self.model.get('brandName'), // 店铺名\r\n      calories: self.model.get('calories'),\r\n      checked: self.model.get('checked') // 选中状态\r\n    };\r\n  },\r\n  // 点击搜索到的食物列表中的食物，添加到计算卡路里列表中\r\n  toggleService: function() {\r\n    this.model.toggle();\r\n    this.food.hide(500);\r\n    // 保存到localStorage中 重要步骤！！ 直接传入this.model是不能保存到localStorage中的\r\n    selectedFoods.create(this.newAttributes());\r\n  }\r\n});\r\n"]}