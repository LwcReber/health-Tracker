{"version":3,"sources":["views/selected-view.js"],"names":["SelectedView","Backbone","View","extend","tagName","this","selectedFood","$","initialize","calCalories","render","selectedFoods","models","forEach","model","totalCalorise","text","toFixed","alert","foodTemplate","_","template","html"],"mappings":"YAAA,IAAIA,cAAeC,SAASC,KAAKC,QAAjCC,QAAIJ,gBAEFI,WAAS,WACTC,KAAAC,aAAAC,EAAA,iBACAC,KAAAA,YAAYD,EAAA,gBAEVF,KAAKI,SAAAA,cAAgB,MAArBJ,KAAAK,SAMFA,OAAQ,WAARA,GAAAA,GAAQ,CACNC,eAAAC,OAAAC,QAAA,SAAAC,GACA,GAAIC,EAAAA,IAAAA,cACJJ,GAAcC,EAAOC,IAAQ,eAA7B,gBAAAE,GAMEV,KAAKI,YAAYO,KAAK,mBAAqBD,EAAcE,QAAQ,IAAjEC,MAAKT,6BAGN,IAAAU,GAAAC,EAAAC,SAAAd,EAAA,oBAAAe,QAAAhB,aAAAK,cAAAC,QAED,OACAP,MAAKC,aAAagB,KAAKH,GADnBA","file":"selected-view.js","sourcesContent":["var SelectedView = Backbone.View.extend({\r\n\r\n  tagName: '#selectedFood',\r\n  // template: _.template($('#select-template').html()),\r\n  initialize: function() {\r\n    this.selectedFood = $('#selectedFood');\r\n    this.calCalories = $('#calCalories');\r\n\r\n    this.listenTo(selectedFoods, 'all', this.render);\r\n  },\r\n\r\n  // Re-render the titles of the todo item.\r\n  render: function() {\r\n    // 卡路里总数\r\n    var totalCalorise = 0;\r\n    selectedFoods.models.forEach(function(model) {\r\n      if (model.get('calories') == 0) return;\r\n      totalCalorise += model.get('calories');\r\n    });\r\n\r\n    if (typeof(totalCalorise) === 'number') {\r\n      this.calCalories.text('total calories: ' + totalCalorise.toFixed(2));\r\n    } else {\r\n      alert('model的calories参数不是number类型');\r\n    }\r\n\r\n    var foodTemplate = _.template( $('#select-template').html(), {selectedFood: selectedFoods.models});\r\n    this.selectedFood.html(foodTemplate);\r\n    return this;\r\n  },\r\n});\r\n"]}